<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
  <script type="text/javascript" src="http://code.jquery.com/ui/1.8.13/jquery-ui.min.js"></script>  
  <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js"></script>
  <script type="text/javascript" src="js/templates.js"></script>
  <script type="text/javascript" src="flowplayer/flowplayer-3.2.6.min.js"></script>
  <script type="text/javascript" src="flowplayer/flowplayer.playlist-3.0.8.min.js"></script>
  <link rel="stylesheet" type="text/css" href="flowplayer/style.css">
  <link rel="stylesheet" href="css/search_results.css" type="text/css" /> 
  <link media="all" type="text/css" href="css/jquery-ui.css" rel="stylesheet">
  <!--<link media="all" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/base/jquery-ui.css" rel="stylesheet"> -->
</head>
<body>
<!-- place for our header -->
<script id="playlist_track_template" type="text/x-jquery-tmpl">
	<a href="${url}">
	${url} <span>${subTitle}</span>
	<em>${time}</em>
	</a>
</script>

 
 <script id="tracks_template" type="text/x-jquery-tmpl">
	 <ul>
	 {{each tracks}}
		<li>
		<div class="track">
			<h3><a href='http://example.com'>${artist_name}</a></h3>
			<h3>${name}</h3>
			<div class = item_buttons>
				<button class="add_button">add</button> 
				<button class="play_button">play</button> 
			<div>
		  </div>
		 </li>
	{{/each}}
	</ul>
</script>		 
  
<script id="artist_expanded_template" type="text/x-jquery-tmpl">
	<div class="artist">
	  <div class="artist_title">
		<button class="expand_button">expand</button> 
		<h3><a href='http://example.com/${mbid}'>${name}</a></h3>
	  </div>
	  <div class="albums">
		  <ul>
		  {{each albums}}
			<div class='album'> 
				<li> <a href='http://example.com/${mbid}'>${name}</a> </li>
			</div>
		  {{/each}}
		  </ul>
	  </div>
	</div>
</script>		

<script>
	$(function() {
		$( "#tabs" ).tabs();
		var artists = [
		{"name":"Rammstein","mbid":"b2d122f9-eadb-4930-a196-8f221eeb0c66" , 
			"albums":[{"name":"The Very Best of Rammstein","mbid":"7bea3d88-533d-4684-ad3a-8eee7b5079e8","tracks":[]}
					]
		},
		{"name":"Ololo","mbid":"b2d122f9-eadb-4930-a196-8f221edb0sc66", 
			"albums":[
					{"name":"The Very Best of Rammstein","mbid":"7bea3d88-533d-4684-ad3a-8eee7b5079e8","tracks":[]}
					]
		}

		];
		
		var tracks = {"artist_name":"Rammstein","mbid":"4ed9a62a-2bf5-4744-ba1b-9a23f27e06c7","tracks":[{"name":"Rammstein (Eskimos & Egypt radio edit)","url":"/home/lana/Music/niusha_-_krasivaya_para.mp3","mbid":"89ec5dbf-44b4-47f3-b4f2-4774e6e175f6"}]};
		
		var playlist_tracks = [
			{
				url: 'music/1.mp3',
				title: 'Palm trees and the sun',
				duration: 230,
				autoPlay: true
			},	
			{
				url: 'music/2.mp3',
				title: 'Happy feet in a car',
				duration: 25
			}
		];	

		applyTemplate("#artist_expanded_template", artists, "#artists");
		applyTemplate("#tracks_template", tracks, "#tracks");
		//applyTemplate("#playlist_track_template", playlist_tracks, "#clips");
		addHiding(".artist .artist_title .expand_button");
		$(".item_buttons").hover(function(){$(".add_button").fadeOut(100);$(".add_button").fadeIn(500);});

	});
</script>


<div class="results">
	<div id="tabs">
		<ul>
			<li><a href="#artists">Artists</a></li>
			<li><a href="#albums">Albums</a></li>
			<li><a href="#tracks">Tracks</a></li>
		</ul>
		<div id="artists">
		</div>
		<div id="albums">
			<div class="clips" >
				<a href="${url}">
					${title}
					<em>${time}</em>
				</a>
			</div>		
			<div id="player">		
			<p>
			<a style="display:block;width:750px;height:30px;"  
				 id="audio1"> 
			</a> 
			</p>
			</div>
		</div>
		<div id="tracks">
		</div>	
	</div>
</div>
<script>
	flowplayer("audio1", "flowplayer/flowplayer-3.2.7.swf", {
		clip:  {
			autoPlay: false,
			autoBuffering: true
		}, 
		
		plugins: {
			controls: {
				playlist: true,
				fullscreen: false, 
				height: 30 
			}
		}
		});
		$f("audio1").playlist("#clips:first", {loop:true});
</script>

</body>
</html>

